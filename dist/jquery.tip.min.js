!function(a){"use strict";var b=function(a,b){this.element=a,this.type=b};b.prototype={add:function(a){this.callback=a,this.element.addEventListener(this.type,this.callback,!1)},remove:function(){this.element.removeEventListener(this.type,this.callback,!1)}};var c=function(a){this.element=a,this.transitionEnd=this.whichTransitionEnd(),this.event=new b(this.element,this.transitionEnd)};c.prototype={whichTransitionEnd:function(){var a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var b in a)if(void 0!==this.element.style[b])return a[b]},bind:function(a){this.event.add(a)},unbind:function(){this.event.remove()}};var d={list:[],getPosition:function(a){if(Array.prototype.indexOf)return this.list.indexOf(a);for(var b=0,c=this.list.length;c>b;b++)if(this.list[b]===a)return b;return-1},insert:function(a){var b=this.getPosition(a),d=-1!==b;return d||(this.list.push(a),this.list.push(new c(a)),b=this.getPosition(a)),this.list[b+1]}};a.transitionEnd=function(a){if(!a)throw"You need to pass an element as parameter!";var b=a[0]||a,c=d.insert(b);return c}}(window),function(a){var b=function(a,b){this.target=a,this.options=$.extend({html:a.attr("data-tip"),margin:4,delay:0,direction:"bottom"},b),this.tip=$('<div class="widget-tip">'),this.text=$('<div class="widget-tip-text">'),this.pointer=$('<div class="widget-tip-pointer">'),this.tip.append(this.text).append(this.pointer),this.setClass("bottom"),this.state="idle",this.target.hover($.proxy(this.show,this),$.proxy(this.hide,this))};b.prototype.setClass=function(a){-1!=$.inArray(a,["top","bottom"])&&this.tip.removeClass("bottom top").addClass(a)},b.prototype.show=function(){var a=this,b=this.target,c=this.text,d=this.tip,e=this.options;d.clearQueue().delay(e.delay).queue(function(){d.removeClass("animate").removeClass("active"),$(this).dequeue()}).delay(50).queue(function(){c.html(e.html),$("body").append(d);var f=$(b).offset(),g=$(b).outerHeight(),h=$(b).outerWidth(),i=d.outerHeight(),j=d.outerWidth(),k=$(window).height(),l=$(window).width(),m=0,n=f.left+h/2-j/2;"bottom"==e.direction?f.top+g+i+e.margin<k?(m=f.top+g+e.margin,a.setClass("bottom")):(d.removeClass("bottom").addClass("top"),m=f.top-i-e.margin,a.setClass("top")):f.top-i-e.margin>0?(m=f.top-i-e.margin,a.setClass("top")):(m=f.top+g+e.margin,a.setClass("bottom")),f.left+h/2+j/2>l?n-=f.left+h/2+j/2-l+e.margin:f.left+h/2-j/2<0&&(n=e.margin),d.css({top:m,left:n}),$(this).dequeue()}).delay(0).queue(function(){d.addClass("animate"),$(this).dequeue()}).delay(50).queue(function(){d.addClass("active"),transitionEnd(d).bind($.proxy(function(){$(this).dequeue(),transitionEnd(d).unbind()},this))}).queue(function(){d.removeClass("animate"),$(this).dequeue()})},b.prototype.hide=function(){var a=(this.text,this.tip);a.clearQueue().delay(0).queue(function(){a.addClass("animate"),$(this).dequeue()}).delay(50).queue(function(){a.removeClass("active"),transitionEnd(a).bind($.proxy(function(){$(this).dequeue(),transitionEnd(a).unbind()},this))}).queue(function(){a.removeClass("animate"),a.detach(),$(this).dequeue()})},a.fn.tip=function(a){typeof a!=typeof{}&&(option={}),$(this).each(function(){$(this).attr("data-tip")&&new b($(this),a)})}}(jQuery);